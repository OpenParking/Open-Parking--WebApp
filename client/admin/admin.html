<div class="home">

	<div class="container">
              <div class="row center">

                    <h2>Welcome Admin {{auth.profile.nickname}}</h2>
                    <img src="{{auth.profile.picture}}" />
                  </div>

              <div class="row center" style="min-height: 1000px;">
                  
                <div class="col s12 m7">

                  <div class="card" id="adminchartcardhold" style="display:none;">
                  <div class="card-image">
                    <svg height="542" width="706"></svg>
                  </div>
                  <div class="card-content">
                    <span class="card-title activator grey-text text-darken-4"></span>
                  </div>
                  </div>
                  <div class="card" id="adminchartcard">
                  <div class="card-image map-canvas" id="adminchart">
                    <!-- <img class="activator" src="assets/images/map.png" style="width: 500px; height: 655px;"> -->

                  </div>
                  <div class="card-content">
                    <span class="card-title activator grey-text text-darken-4">Estacionamiento ITESM Guadalajara</span>
                  </div>
                  </div>
                </div>
                <div class="col s12 m5">



                <a ng-click="initNewZone()" class="btn" ng-show="newZone == null && loaded">New Zone</a>
                <div class="row center">
                    <!--display only -->
                    <div class="card padding" ng-repeat="zone in zones | filter:statusFilter track by $index">
                    <div class="card padding" ng-hide="zone == editedZone"> 
                      <div class="row">
                        <div class="input-field col s4">
                           <h6 class="lite" for="roomId">{{zone.name}}</h6>
                        </div>
                        <div class="input-field col s6">
                           <div id="canvas{{zone.id}}"></div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="input-field col s1">
                           <p class="lite" for="roomId">ID</p>
                        </div>
                        <div class="input-field col s1">
                            <p>{{zone.id}}</p>
                        </div>
                        <div class="input-field col s1">
                           <p class="lite" for="roomId">Nombre</p>
                        </div>
                        <div class="input-field col s3">
                            <p>{{zone.name}}</p>
                        </div>
                        <div class="input-field col s1">
                           <p class="lite" for="roomId">X</p>
                        </div>
                        <div class="input-field col s2">
                            <p>{{zone.x}}</p>

                        </div>
                        <div class="input-field col s1">
                           <p class="lite" for="roomId">Y</p>
                        </div>
                        <div class="input-field col s2">
                            <p>{{zone.y}}</p>

                        </div>
                      </div>
                      <div class="row">
                        <div class="input-field col s1">
                           <p class="lite" for="roomId">Width</p>
                        </div>
                        <div class="input-field col s2">
                            <p>{{zone.w}}</p>

                        </div>
                        <div class="input-field col s1">
                           <p class="lite" for="roomId">Height</p>
                        </div>
                        <div class="input-field col s2">
                            <p>{{zone.h}}</p>

                        </div>
                        <div class="input-field col s1">
                           <p class="lite" for="roomId">Angle</p>
                        </div>
                        <div class="input-field col s2">
                            <p>{{zone.angle}}</p>

                        </div>
                        <div class="input-field col s1">
                           <p class="lite" for="roomId">Capacity</p>
                        </div>
                        <div class="input-field col s2">
                            <p>{{zone.capacity}}</p>

                        </div>
                         <div class="input-field col s1">
                           <p class="lite" for="roomId">Taken</p>
                        </div>
                        <div class="input-field col s1">
                            <p>{{ zone.full }}</p>
                        </div>
                      </div>
                    </div>
                    <!-- edited -->
                    <div class="card padding" ng-show="zone == editedZone">
                      <div class="row">
                        <div class="input-field col s2">
                           <h6 class="lite" for="roomId">{{zone.name}} ({{zone.id}})</h6>
                        </div>
                        <div class="input-field col s2">
                           <div id="edcanvas{{zone.id}}"></div>
                           <p ng-repeat="subCategory in drawCanvas($index)"></p>
                        </div>
                      </div>
                      <div class="row">
                        <div class="input-field col s2">
                           <label class="lite" for="roomId">ID</label>
                        </div>
                        <div class="input-field col s10">
                            <input ng-model="zone.id" type="text">
                        </div>
                      </div>
                      <div class="row">
                        <div class="input-field col s2">
                           <label class="lite" for="roomId">Nombre</label>
                        </div>
                        <div class="input-field col s10">
                            <input ng-model="zone.name" type="text">
                        </div>
                      </div>
                      <div class="row">
                        <div class="input-field col s2">
                           <label class="lite" for="roomId">X</label>
                        </div>
                        <div class="input-field col s4">
                            <input ng-model="zone.x" type="number">

                        </div>
                        <div class="input-field col s2">
                           <label class="lite" for="roomId">Y</label>
                        </div>
                        <div class="input-field col s4">
                            <input ng-model="zone.y" type="number">

                        </div>
                      </div>
                      <div class="row">
                        <div class="input-field col s2">
                           <label class="lite" for="roomId">Angle</label>
                        </div>
                        <div class="input-field col s4">
                            <input ng-model="zone.angle" type="number">

                        </div>
                      </div>
                      <div class="row">
                        <div class="input-field col s2">
                           <label class="lite" for="roomId">Width</label>
                        </div>
                        <div class="input-field col s4">
                            <input ng-model="zone.w" type="number">

                        </div>
                        <div class="input-field col s2">
                           <label class="lite" for="roomId">Height</label>
                        </div>
                        <div class="input-field col s4">
                            <input ng-model="zone.h" type="number">

                        </div>
                      </div>
                      <div class="row">
                        <div class="input-field col s2">
                           <label class="lite" for="roomId">Capacity</label>
                        </div>
                        <div class="input-field col s4">
                            <input ng-model="zone.capacity" type="text">

                        </div>
                         <div class="input-field col s2">
                           <label class="lite" for="roomId">Taken</label>
                        </div>
                        <div class="input-field col s4">
                            <p>{{ zone.full }}</p>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="input-field col s3">
                          <a ng-click="editZone($index)" class="btn" ng-hide="zone == editedZone">Edit</a>
                          <a ng-click="doneEditing($index)" class="btn" ng-show="zone == editedZone && newZone == null">Update</a>
                          <a ng-click="addZone()" class="btn" ng-show="newZone != null">Save</a>
                      </div>
                      <div class="input-field col s3">
                          <a ng-click="removeZone($index)" class="btn red" ng-show="zone == editedZone && newZone == null">Delete</a>
                      </div>
                      <div class="input-field col s3">
                          <a ng-click="cancelEditZone($index)" class="btn" ng-show="zone == editedZone">Cancel</a>
                      </div>
                    </div>
                  </div>
                </div>
              <form class="col s12"  ng-show="newZone != null">


            </div>

                </div>
              </div>
          </div>
</div>

<script>
window.onscroll = function() {myFunction()};
window.onload = function(){
  var scrollPosition = window.pageYOffset;
  var windowSize     = window.innerHeight;
  var bodyHeight     = document.body.offsetHeight;
  console.log("LOAD!"+Math.max(bodyHeight - (scrollPosition + windowSize), 0));
    if (document.body.scrollTop > 240 && (Math.max(bodyHeight - (scrollPosition + windowSize), 0)) > 200 ) {
        document.getElementById("adminchartcard").setAttribute('style', 'position: fixed; top: 0px;');
        document.getElementById("adminchartcardhold").setAttribute('style', 'display: block');
    } 
    else if(Math.max(bodyHeight - (scrollPosition + windowSize), 0) < 100 ){
        document.getElementById("adminchartcard").setAttribute('style', 'position: fixed; bottom: 180px;');
        document.getElementById("adminchartcardhold").setAttribute('style', 'display: block');

    }else {
        document.getElementById("adminchartcard").removeAttribute('style');
        document.getElementById("adminchartcardhold").setAttribute('style', 'display: none');
    }
}

function myFunction() {
  var scrollPosition = window.pageYOffset;
var windowSize     = window.innerHeight;
var bodyHeight     = document.body.offsetHeight;
  console.log(Math.max(bodyHeight - (scrollPosition + windowSize), 0));
    if (document.body.scrollTop > 240 && (Math.max(bodyHeight - (scrollPosition + windowSize), 0)) > 100 ) {
        document.getElementById("adminchartcard").setAttribute('style', 'position: fixed; top: -10px;-webkit-transition: position 2s; /* For Safari 3.1 to 6.0 */transition: position 2s;');
        document.getElementById("adminchartcardhold").setAttribute('style', 'display: block;');
    } 
    else if((Math.max(bodyHeight - (scrollPosition + windowSize), 0)) < 100 ){
        document.getElementById("adminchartcard").setAttribute('style', 'position: fixed; bottom: 180px;  -webkit-transition: position 2s; /*For Safari 3.1 to 6.0 */ transition: position 2s;');
        document.getElementById("adminchartcardhold").setAttribute('style', 'display: block');
    }else {
        document.getElementById("adminchartcard").removeAttribute('style');
        document.getElementById("adminchartcardhold").setAttribute('style', 'display: none');
    }
}
</script>